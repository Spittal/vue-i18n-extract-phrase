{"version":3,"file":"vue-i18n-phrase.modern.js","sources":["../src/phrase/projects.ts","../src/phrase/locales.ts","../src/phrase/files.ts","../src/phrase/setup.ts","../src/commands/sync.ts","../src/index.ts"],"sourcesContent":["import axios from 'axios';\nimport { PhraseProject } from '../types';\n\nexport async function getProject (projectName?: string): Promise<PhraseProject> {\n  const { data: projects }: { data: PhraseProject[] } =\n    await axios.get('https://api.phraseapp.com/api/v2/projects');\n\n  const project = (projectName) ? projects.find((project) => project.name === projectName) : projects[0];\n\n  if (!project) throw new Error('Could not find project from PhraseAPI. If no project was defined as an argument, then there is no project in the selected Phrase Account')\n\n  return project;\n}\n","import axios from 'axios';\nimport { PhraseProject, PhraseLocale } from '../types';\n\nfunction getLastPageFromLink (link: string): number {\n  const regex = /page=([0-9]*)&per_page=100>; rel=last/;\n  const regexMatch = regex.exec(link);\n\n  if (!regexMatch) throw new Error('Could not get pagination info from the PhraseAPI');\n\n  return parseInt(regexMatch[1]);\n}\n\nasync function getPageOfLocales (project: PhraseProject, page: number): Promise<{ data: PhraseLocale[]; lastPage: number }> {\n  const { data, headers } = await axios.get(`https://api.phraseapp.com/api/v2/projects/${project.id}/locales`, {\n    params: {\n      page,\n      per_page: 100, // eslint-disable-line @typescript-eslint/camelcase\n    },\n  });\n  return {\n    data,\n    lastPage: getLastPageFromLink(headers.link),\n  };\n}\n\nexport function getSelectedLocale (locales: PhraseLocale[], makeTranslation: string | boolean = false): PhraseLocale {\n  let locale: PhraseLocale | undefined;\n  if (typeof makeTranslation === 'string') {\n    locale = locales.find((locale) => locale.code === makeTranslation);\n  }\n  locale = locales.find((locale) => locale.default);\n\n  if (!locale) throw new Error('Locale not found, is the argument makeTranslation set correctly?');\n\n  return locale;\n}\n\nexport async function getLocales (project: PhraseProject): Promise<PhraseLocale[]> {\n  const locales: PhraseLocale[] = [];\n\n  const { data: firstData, lastPage } = await getPageOfLocales(project, 1);\n  locales.push(...firstData);\n\n  for (let page = 2; page <= lastPage; page++) {\n    const { data } = await getPageOfLocales(project, page);\n    locales.push(...data);\n  }\n\n  return locales;\n}\n\n","import axios from 'axios';\nimport {\n  PhraseLocale,\n  PhraseProject,\n  PhraseTranslation,\n  PhraseUpload,\n} from '../types';\nimport {\n  I18NLanguage,\n  I18NItem,\n} from 'vue-i18n-extract/dist-types/library/models';\nimport FormData from 'form-data';\nimport fs from 'fs';\n\nexport async function confirmUploadSuccess (\n  project: PhraseProject,\n  upload: PhraseUpload,\n): Promise<PhraseUpload> {\n  return new Promise((resolve, reject) => {\n    let count = 1;\n    function viewUploadDetails (): void {\n      if (count < 13) {\n        setTimeout(async () => {\n          const { data: uploadedFile }: { data: PhraseUpload } =\n          await axios.get(`https://api.phraseapp.com/api/v2/projects/${project.id}/uploads/${upload.id}`);\n          if (uploadedFile.state === 'success') {\n            resolve(uploadedFile);\n          } else {\n            count++;\n            viewUploadDetails();\n          }\n        }, 500);\n      } else {\n        reject(\n          'It has taken over a minute to confirm the upload was a success. ' +\n          'Please refer to your Phrase Dashboard Web UI Uploaded Files section for more information.',\n        );\n      }\n    }\n    viewUploadDetails();\n  });\n}\n\nexport async function uploadLanguageFile (\n  filePath: string,\n  project: PhraseProject,\n  locale: PhraseLocale,\n  tags?: string,\n  makeTranslation: boolean | string = false,\n): Promise<PhraseUpload> {\n  const formData = new FormData();\n\n  formData.append(\n    'file',\n    fs.createReadStream(filePath),\n    `${locale.code}-${(tags || '').split(',').join('-')}.json`,\n  );\n  formData.append('file_format', `simple_json`);\n  formData.append('locale_id', locale.id);\n  if (tags) {\n    formData.append('tags', tags);\n  }\n  formData.append('update_translations', `${!!makeTranslation}`);\n  formData.append('skip_upload_tags', 'true');\n\n  const { data: uploadedFile }: { data: PhraseUpload } = await axios.post(\n    `https://api.phraseapp.com/api/v2/projects/${project.id}/uploads`,\n    formData,\n    {\n      headers: formData.getHeaders(),\n    },\n  );\n\n  return confirmUploadSuccess(project, uploadedFile);\n}\n\n\n\nexport async function downloadAllTranslationsToI18NLanguage (\n  locales: PhraseLocale[],\n  project: PhraseProject,\n  tags?: string,\n): Promise<I18NLanguage> {\n  const i18nLanguage: I18NLanguage = {};\n\n  for (const locale of locales) {\n    const { data }: { data: PhraseTranslation[] } = await axios.get(\n      `https://api.phraseapp.com/api/v2/projects/${project.id}/locales/${\n        locale.id\n      }/download`,\n      { params: { file_format: 'simple_json', tags } }, // eslint-disable-line @typescript-eslint/camelcase\n    );\n\n    i18nLanguage[locale.code] = Object.keys(data).map((path) => {\n      return {\n        language: locale.code,\n        path,\n      };\n    }) as I18NItem[];\n  }\n\n  return i18nLanguage;\n}\n","import axios, { AxiosError } from 'axios';\n\nexport function setupAxios (accessToken: string): void {\n  axios.defaults.headers.common.Authorization = `token ${accessToken}`;\n  axios.interceptors.response.use(\n    (response) => response,\n    (error: AxiosError) => {\n      if (error.response && error.response.status === 429) {\n        throw new Error('Too many requests sent to the PhraseAPI, please wait 5 minutes and try again.');\n      }\n\n      throw error;\n    },\n  );\n}\n","import chalk from 'chalk';\nimport fs from 'fs';\nimport path from 'path';\nimport VueI18NExtract from 'vue-i18n-extract';\nimport { I18NItem, I18NLanguage } from 'vue-i18n-extract/dist-types/library/models';\nimport {\n  getLocales,\n  getProject,\n  getSelectedLocale,\n  setupAxios,\n  uploadLanguageFile,\n  downloadAllTranslationsToI18NLanguage,\n} from '../phrase';\nimport {\n  SyncCommandOptions,\n  PhraseLocale,\n  PhraseProject,\n  PhraseUpload,\n} from '../types';\n\nfunction parsedVueFilesToJSON (\n  parsedVueFiles: I18NItem[],\n  makeTranslation: boolean | string = false,\n): object {\n  return parsedVueFiles.reduce((accumulator, i18nItem) => {\n    if (!!makeTranslation) {\n      accumulator[i18nItem.path] = i18nItem.path;\n    } else {\n      accumulator[i18nItem.path] = '';\n    }\n    return accumulator;\n  }, {});\n}\n\nasync function makeOutputDir (outputDir: string): Promise<void> {\n  return fs.mkdir(\n    path.resolve(process.cwd(), outputDir),\n    { recursive: true },\n    (err) => { if (err) { throw err; } },\n  );\n}\n\nfunction writeLanguageJSON (languageJSON: object, outputDir: string, locale: PhraseLocale): string {\n  const filePath = path.resolve(process.cwd(), outputDir, `${locale.code}.json`);\n  fs.writeFile(\n    filePath,\n    JSON.stringify(languageJSON),\n    (err) => { if (err) { throw err; } },\n  );\n  return filePath;\n}\n\nexport async function sync ({\n  vueFiles,\n  accessToken,\n  project,\n  tags,\n  makeTranslation,\n  skipReport = false,\n  dryRun = false,\n  outputDir = './phrase-reports',\n}: SyncCommandOptions): Promise<void> {\n  const parsedVueFiles: I18NItem[] = VueI18NExtract.parseVueFiles(vueFiles);\n  const languageJSON: object = parsedVueFilesToJSON(parsedVueFiles, makeTranslation);\n\n  console.log(chalk.green(`\\nFound ${Object.keys(languageJSON).length} unique keys in your Vue.js files`));\n\n  setupAxios(accessToken);\n\n  console.log(chalk.bold(`\\nGetting Phrase project and locale...`));\n\n  const selectedProject: PhraseProject = await getProject(project);\n  const locales: PhraseLocale[] = await getLocales(selectedProject);\n  const selectedLocale: PhraseLocale = getSelectedLocale(locales, makeTranslation);\n\n  console.log(`Using project: ${chalk.green(selectedProject.name)}`);\n  console.log(`Using locale: ${chalk.green(selectedLocale.code)}`);\n\n  await makeOutputDir(outputDir);\n  const filePath = writeLanguageJSON(languageJSON, outputDir, selectedLocale);\n\n  console.log(`\\nUploading keys to Phrase for the ${chalk.bold(selectedLocale.name)} locale.`);\n  if (tags) { console.log(`With the tags ${chalk.bold(tags)}`); }\n  if (!!makeTranslation) { console.log(`With the keys set as the translation`); }\n\n  if (!dryRun) {\n    const uploadedFile: PhraseUpload =\n      await uploadLanguageFile(filePath, selectedProject, selectedLocale, tags, makeTranslation);\n    console.log(`\\nKeys successfully added!`);\n    console.log(`\\nUpload File Summary:`);\n    console.log(`File Name: ${uploadedFile.filename}`);\n    console.log(`Keys Created: ${uploadedFile.summary.translation_keys_created}`);\n    console.log(`Keys Updated: ${uploadedFile.summary.translations_updated}`);\n    console.log(`Keys Unmentioned: ${uploadedFile.summary.translation_keys_unmentioned}`);\n    console.log(`Key Translations Created: ${uploadedFile.summary.translations_created}`);\n    console.log(`Key Translations Updated: ${uploadedFile.summary.translations_updated}`);\n    console.log(`Tags Created: ${uploadedFile.summary.tags_created}`);\n  } else {\n    console.log(chalk.bgRed.whiteBright(`\\nPsyke! it's a dry run, nothing is changed in Phrase!`));\n  }\n\n  if (!skipReport) {\n    console.log(chalk.bold(`\\nGenerating a full report...`));\n    if (tags) { console.log(`Getting all translations with the tags ${chalk.bold(tags)}`); }\n\n    const i18nLanguage: I18NLanguage = await downloadAllTranslationsToI18NLanguage(locales, selectedProject, tags);\n    const report = VueI18NExtract.extractI18NReport(parsedVueFiles, i18nLanguage);\n    await VueI18NExtract.writeReportToFile(report, `${outputDir}/report.json`);\n  }\n\n  console.log(chalk.green(`\\nComplete! you can view you language file and report at ${outputDir}\\n`));\n}\n","import { Command } from 'commander';\nimport { sync } from './commands/index.js';\n\nconst program = new Command();\nprogram\n  .version(process.env.npm_package_version || '0.0.0')\n  .usage('sync [options]')\n  .command('sync', { isDefault: true })\n  .option(\n    '-v --vueFiles <vueFiles>',\n    'A file glob pointing to your Vue.js source files.'\n  )\n  .option(\n    '-a --accessToken <accessToken>',\n    'Phrase API access token'\n  )\n  .option(\n    '-p --project [project]',\n    'Phrase project, defaults to the first project in your account'\n  )\n  .option(\n    '-t, --tags [tags]',\n    'A comma separated list of any custom tags you would like to apply to the keys',\n  )\n  .option(\n    '-m --makeTranslation [makeTranslation]',\n    'If you would like the key path to be the translation in your default locale. Optionally set as a locale code to make translation in a non-default locale'\n  )\n  .option(\n    '-s --skipReport [skipReport]',\n    'Skip report generation'\n  )\n  .option(\n    '-o --outputDir [outputDir]',\n    'Directory for report files. Will default to ./phrase-reports',\n  )\n  .option(\n    '-d --dryRun [dryRun]',\n    'Use if you do not want anything posted to Phrase',\n  )\n  .action(sync);\n\nprogram.parse(process.argv);\n"],"names":["getProject","projectName","data","projects","axios","get","project","find","name","Error","getLastPageFromLink","link","regex","regexMatch","exec","parseInt","getPageOfLocales","page","headers","id","params","per_page","lastPage","getSelectedLocale","locales","makeTranslation","locale","code","default","getLocales","firstData","push","confirmUploadSuccess","upload","Promise","resolve","reject","count","viewUploadDetails","setTimeout","uploadedFile","state","uploadLanguageFile","filePath","tags","formData","FormData","append","fs","createReadStream","split","join","post","getHeaders","downloadAllTranslationsToI18NLanguage","i18nLanguage","file_format","Object","keys","map","path","language","setupAxios","accessToken","defaults","common","Authorization","interceptors","response","use","error","status","parsedVueFilesToJSON","parsedVueFiles","reduce","accumulator","i18nItem","makeOutputDir","outputDir","mkdir","process","cwd","recursive","err","writeLanguageJSON","languageJSON","writeFile","JSON","stringify","sync","vueFiles","skipReport","dryRun","VueI18NExtract","parseVueFiles","console","log","chalk","green","length","bold","selectedProject","selectedLocale","filename","summary","translation_keys_created","translations_updated","translation_keys_unmentioned","translations_created","tags_created","bgRed","whiteBright","report","extractI18NReport","writeReportToFile","program","Command","version","env","npm_package_version","usage","command","isDefault","option","action","parse","argv"],"mappings":"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"}